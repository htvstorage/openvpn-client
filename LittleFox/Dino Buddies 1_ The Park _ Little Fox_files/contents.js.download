try
{google.load("visualization","1",{packages:["corechart"]});}
catch(e)
{}
var fc_list=null;var back_sm_id=null;var fc_move_flag=null;var _series_is=false;var _series_fc_id=0;var detail_return_data=null;var perv_next_data=null;var CONTENTS_IMG_URL=null;var CONT_TYPE_CODE=null;var voca_pop_yn;var voca_game_type=null;var cross_pop_yn;var star_pop_yn;var org_pop_yn;if(LANG=="ko")
var alert_title="알림";else
var alert_title="Little Fox";var langVocaStarMultiErrMsg=$('#langVocaStarMultiErrMsg').val();var langVocaCrossMultiErrMsg=$('#langVocaCrossMultiErrMsg').val();function detail_view(path,fc_id,sm_id,bookshelf_id)
{if(ROOT_PATH.substr(1,2)=="ko"){detail_view_ko(path,fc_id,sm_id,bookshelf_id)}else{detail_view_global(path,fc_id,sm_id,bookshelf_id)}}
function detail_view_global(path,fc_id,sm_id,bookshelf_id){if(sm_id)
{if(back_sm_id!=sm_id)fc_list=null;}
else if(bookshelf_id){if(back_sm_id!=bookshelf_id)fc_list=null;}
_series_fc_id=fc_id;$('#learning iframe').remove();if(typeof(sm_id)=="undefined"){sm_id="";}
try
{if(strpos(ROOT_PATH,"/ko/")===false){path=ROOT_PATH+"/readers"}}
catch(e)
{}
load_window_time=new Date();setTimeout(function(){if(load_window_time!=-1){load_image_open();}},2000);var chk_url=path+"/detail/"+fc_id+"/"+sm_id;$.ajax({type:"POST",url:chk_url,data:{fc_id:fc_id},dataType:'json',success:function(data){load_window_time=-1;$("#lp_body").fadeIn(100);try
{if(data.message=="error"){view_error_msg(lang_common_contents_is);return;}}
catch(e)
{}
detail_return_data=data.rel_cont_arr;perv_next_data=data.perv_next_data;CONTENTS_IMG_URL=data.CONTENTS_IMG_URL
CONT_TYPE_CODE=data.rs["CONT_TYPE_CODE"];_series_is=false;if(data.rs["FS_ID"]!=null&&data.rs["FS_ID"]!=""){_series_is=true;}else{fc_list=null;}
switch(CONT_TYPE_CODE){case"S":CONT_TYPE_CODE="동화";break;case"M":CONT_TYPE_CODE="동요";break;case"G":CONT_TYPE_CODE="게임";break;}
if(data.message=="error"){view_error_msg("컨텐츠가 없습니다.");return;}
var src_url=data.CONTENTS_IMG_URL+"/"+fc_id+"/detail.png?"+data.rs['PURGE_VAL'];var detail_pop=$('<div></div>').addClass('detail_pop');var title=$('<div></div>').addClass('detail_pop_tit');if(data.rs["CONT_TYPE_CODE"]==="S"){title.append($('<span></span>').addClass('bg_detail_pop detail_pop_tit_level'+data.rs['CONT_LV']).text(eval('lang_contents_level_'+data.rs['CONT_LV'])));title.append($('<div></div>').addClass('detail_pop_tit_txt').append($('<div></div>').addClass('innercontainer').append($('<div></div>').addClass('element').text(data.rs['CONT_TITLE'])))).appendTo(detail_pop);}else{title.append($('<div></div>').addClass('detail_pop_tit_txt type_song_game').append($('<div></div>').addClass('innercontainer').append($('<div></div>').addClass('element').text(data.rs['CONT_TITLE'])))).appendTo(detail_pop);}
if(data.rs["CONT_TYPE_CODE"]!='G')
_free=data.rs['FREE_YN']=="Y"?"F":"";else{_free=data.rs['FREE_YN']==""?"N":data.rs['FREE_YN'];if(data.rs['FREE_YN']=="Y")_free="F";}
var total_hit=0;var last_view_hit=0;var this_view_hit=0;try
{total_hit=data.total_hit[0]['TOT'];last_view_hit=data.total_hit[0]['PREV_HIT'];this_view_hit=data.total_hit[0]['CURR_HIT'];}
catch(e)
{}
if(typeof(lang_contents_contents_hit)=="undefined")lang_contents_contents_hit="contents_hit";if(typeof(lang_contents_detail_category)=="undefined")lang_contents_detail_category="Category";if(typeof(lang_contents_detail_subcategory)=="undefined")lang_contents_detail_subcategory="Subcategory";if(typeof(lang_contents_detail_releasedate)=="undefined")lang_contents_detail_releasedate="Release Date";if(typeof(lang_contents_detail_viewslastmonth)=="undefined")lang_contents_detail_viewslastmonth="Views Last Month";if(typeof(lang_contents_detail_viewsthismonth)=="undefined")lang_contents_detail_viewsthismonth="Views This Month";if(typeof(lang_contents_detail_totalviews)=="undefined")lang_contents_detail_totalviews="Total Views";var detail_pop_cont=$('<div></div>').addClass('detail_pop_cont');if(data.rs["CONT_TYPE_CODE"]!="G")
{if(data.rs["EBOOK_YN"]=="N"){$('<div></div>').addClass('detail_pop_cont_img_box').append($('<a></a>').addClass('detail_pop_cont_img_a').append($('<img></img>').attr({'src':src_url,'alt':data.rs['CONT_TITLE'],'width':"374px",'height':"262px",'class':"bg_wh_border",}))).append($('<a></a>').addClass('bg_detail_pop detail_pop_cont_play').attr('onclick','Player.view("'+fc_id+'" , "'+_free+'")').append($('<span></span>').text("Play"))).appendTo(detail_pop_cont);}else{$('<div></div>').addClass('detail_pop_cont_img_box').append($('<a></a>').addClass('detail_pop_cont_img_a').append($('<img></img>').attr({'src':src_url,'alt':data.rs['CONT_TITLE'],'width':"374px",'height':"262px",'class':"bg_wh_border",}))).append($('<div></div>').addClass('bg_detail_pop detail_pop_cont_play btn_170630').append($('<a></a>').addClass('play_btn_170630 btn_hover').attr('onclick','Player.view("'+fc_id+'" , "'+_free+'")').append($('<span></span>').text("Play"))).append($('<a></a>').addClass('ebook_btn_170630 btn_hover').attr('onclick','Supplement.eBook("'+fc_id+'" , "'+(_free=='F'?'Y':'N')+'")').append($('<span></span>').text("Read")))).appendTo(detail_pop_cont);}}
else
{$('<div></div>').addClass('detail_pop_cont_img_box').append($('<a></a>').addClass('detail_pop_cont_img_a').append($('<img></img>').attr({'src':src_url,'alt':data.rs['CONT_TITLE'],'width':"374px",'height':"262px",'class':"bg_wh_border",}))).append($('<a></a>').addClass('bg_detail_pop detail_pop_cont_play').attr('onclick','Player.view("'+fc_id+'" , "'+_free+'","G")').append($('<span></span>').text("Play"))).appendTo(detail_pop_cont);}
var cont_info_txt=data.rs['CATG_NAME'];if(data.funny['funny_count']=="0")data.funny['funny_count']="";else data.funny['funny_count']=number_format(data.funny['funny_count']);$('<div></div>').addClass('detail_pop_cont_txt_box').append($('<div></div>').addClass('detail_pop_cont_txt_top').append($('<div></div>').addClass('detail_pop_funny').attr('onclick','run_funny("'+fc_id+'","+")').append($('<a></a>').addClass('detail_pop_funny_bt').append($('<span></span>').addClass('bg_detail_pop detail_pop_funny_img')).append($('<span></span>').addClass('detail_pop_funny_txt').text(lang_contents_funny).append($(' <strong style="margin-left:3px;"></strong>').text(data.funny['funny_count'])))).append($('<div></div>').addClass('detail_pop_cont_txt_funny_layer1').text(lang_contents_this_contents_is_fun).append('<div class="bg_detail_pop detail_pop_cont_txt_funny_layer_arrow"></div>')).append($('<div></div>').addClass('detail_pop_cont_txt_funny_layer2').text(lang_contents_cancel_fun).append('<div class="bg_detail_pop detail_pop_cont_txt_funny_layer2_arrow"></div>')))).append($('<div></div>').addClass('detail_pop_cont_txt_table_box').append($('<table></table>').addClass('detail_pop_cont_txt_table').append($('<thead></thead>').append($('<tr></tr>').addClass('tit').append($('<th colspan="2"></th>').text(lang_contents_content_info)))).append($('<tbody></tbody>').append($('<tr></tr>').append($('<th></th>').text(lang_contents_detail_category)).append($('<td></td>').text(data.rs['CATG_NAME']))).append($('<tr></tr>').append($('<th></th>').text(lang_contents_detail_releasedate)).append($('<td></td>').text((data.rs['OPEN_DATE'])))).append($('<tr></tr>').append($('<th></th>').text(lang_contents_detail_viewslastmonth)).append($('<td></td>').text(number_format(last_view_hit)))).append($('<tr></tr>').append($('<th></th>').text(lang_contents_detail_viewsthismonth)).append($('<td></td>').text(number_format(this_view_hit)))).append($('<tr></tr>').append($('<th></th>').text(lang_contents_detail_totalviews)).append($('<td></td>').text(number_format(total_hit))))))).appendTo(detail_pop_cont);var div=$('<div></div>').addClass("icon");$(data.supplement_btns2).each(function(key,btn){$(div).append(btn);});_bookshelf_is=false;if(typeof(_web_position)=="undefined"){_bookshelf_is=true;}
if(typeof(_web_position)!="undefined"){if(_web_position!="bookshelf"){_bookshelf_is=true;}}
if(_bookshelf_is==false){$(div).find("span.detail_pop_book").parent().remove();}
$('<div></div>').addClass('detail_pop_cont_study').append($('<div></div>').addClass('detail_pop_cont_study_tit').text(lang_contents_learning_resources)).append(div).appendTo(detail_pop_cont);$(detail_pop).append(detail_pop_cont);if(sm_id||bookshelf_id||fc_move_flag)
{$(detail_pop).append($('<a></a>').addClass('bg_detail_pop detail_pop_prev').append('<span>'+lang_contents_previous_content+'</span>')).append($('<a></a>').addClass('bg_detail_pop detail_pop_next').append('<span>'+lang_contents_next_content+'</span>'))}
$(detail_pop).append($('<a></a>').addClass('detail_pop_close').attr('onclick',"Layerpop.close();").text("×").append('<span>'+lang_contents_close+'</span>'));if(typeof($("#lp_body").html())!="undefined"){$('.detail_pop').remove();$('#lp_film').eq(1).remove();$('#lp_body').html($('<div></div>').append(detail_pop).html());Layerpop.center("lp_body");}else{$('#lp_body .detail_pop').remove();Layerpop.open($('<div></div>').append(detail_pop).html());}
$('.detail_pop_cont_play, .detail_pop_cont_img_box img').attr("data-ga",'상세보기|재생 클릭|'+data.rs['CONT_TITLE']);$('.detail_pop_funny').attr("data-ga",'상세보기|좋아요 클릭|'+data.rs['CONT_TITLE']);if(ROOT_PATH.substr(1,2)=="cn")
{}
if(data.rs['CONT_TYPE_CODE']=="S"){$(".detail_mark_layer").text(story_detail_mark).css('z-Index','1');}else
if(data.rs['CONT_TYPE_CODE']=="M"){$(".detail_mark_layer").text(song_detail_mark).css('z-Index','1');}else{$(".detail_mark_layer").text("");$(".detail_pop_cont_txt_table").find("tr").eq(2).remove();$(".cont_info").find("li").eq(2).remove();}
$(".cont_info").find("li").eq(0).addClass("subject");var url=location.href;if(url.indexOf('null')>0)
{url=url.replace('null',fc_id);}
else
{url+="/"+fc_id;}
if(url.indexOf('DP0')>0){}else{}
if(data.funny['funny_count']=="0")$(".detail_pop_funny_txt").find("strong").hide();if(!Login.chk()){$('.detail_pop_funny_r').removeClass('detail_pop_funny_r').addClass('detail_pop_funny').attr('onclick','alert("'+lang_contents_quiz_data_logout+'");');$('.detail_pop_funny').removeClass('detail_pop_funny_r').attr('onclick','alert("'+lang_contents_quiz_data_logout+'");');$(".detail_pop_cont_txt_funny_layer1").remove();$(".detail_pop_cont_txt_funny_layer2").remove();}
var _options={width:'339',height:'70',fontSize:"11",fontColor:"red",chartArea:{'left':'0','top':'0','width':'100%','height':'55%'},bar:{groupWidth:'74%'},hAxis:{baselineColor:"#dddddd",textPosition:"none",format:'#%',textStyle:{color:'#444444',fontSize:13}},vAxis:{baselineColor:"#dddddd",textPosition:"none",format:'#%'},series:[{color:"#44e49b"},{color:"#76c5fa"},{color:"#feb240"},{color:"#f6989d"},{color:"#b298f6"}],legend:{position:"bottom"},isStacked:true};$('.detail_pop_cont_reco ul li:last').addClass('last');$('#lp_film').click(function(){Layerpop.close();});if(fc_list==null)
{var chk_url="";if(sm_id=="indata"){fc_list=indata;set_prev_next(path,fc_id,sm_id,bookshelf_id);}else if(sm_id)
{back_sm_id=sm_id;chk_url=path+"/get_detail_prev_next_info/"+sm_id+"/"+fc_id;}
else if(bookshelf_id)
{back_sm_id=bookshelf_id;chk_url=ROOT_PATH+"/bookshelf/get_shelf_items_all_fc_id/"+bookshelf_id;}
if(sm_id!="indata"){if(chk_url!=""){$.ajax({type:"POST",url:chk_url,dataType:'json',success:function(data){fc_list=data;set_prev_next(path,fc_id,sm_id,bookshelf_id);}});}else{var releated_ul=$('<ul></ul>');$(releated_ul).append(get_releated_obj(detail_return_data,lang_contents_littlefox_readers,CONTENTS_IMG_URL));$('<div></div>').addClass('detail_pop_cont_reco').append($('<div></div>').addClass('detail_pop_cont_reco_tit').text(lang_contents_this_also_got_fun)).append(releated_ul).appendTo($(".detail_pop_cont_study").parent());}}}
else
{set_prev_next(path,fc_id,sm_id,bookshelf_id);}
if(parseInt(data.funny['is_funny_count'])>0&&Login.chk())
{$('.detail_pop_funny').removeClass('detail_pop_funny').addClass('detail_pop_funny_r').attr('onclick','run_funny("'+fc_id+'", "-")');}
$('.detail_pop_bt_box2').click(function(){var layer_pop=$(this).parent().find('.detail_pop_bt_box2_pop');$(layer_pop).css({'display':'block','z-index':'99999'});$(this).removeClass('detail_pop_bt_box2').addClass('detail_pop_bt_box2_r');var left=($(document).width()-$('#lp_body').width())/2;var top=($(document).height()-$('#lp_body').height())/2;$('#lp_body').append($('<div></div>').css({'width':$(document).width(),'height':$(document).height(),'position':'absolute','top':-top,'left':-left,'z-index':'99998'}).attr('id','more_body'));var this_more=$(this);$('#more_body').click(function(){$(this).remove();$(layer_pop).css('display','none');$(this_more).removeClass('detail_pop_bt_box2_r').addClass('detail_pop_bt_box2');});});},error:function(){}});}
var load_window_time=0;function detail_view_ko(path,fc_id,sm_id,bookshelf_id){if(sm_id)
{if(back_sm_id!=sm_id)fc_list=null;}
else if(bookshelf_id){if(back_sm_id!=bookshelf_id)fc_list=null;}
_series_fc_id=fc_id;$('#learning iframe').remove();if(typeof(sm_id)=="undefined"){sm_id="";}
try
{if(strpos(ROOT_PATH,"/ko/")===false){path=ROOT_PATH+"/readers"}}
catch(e)
{alert(e);}
load_window_time=new Date();setTimeout(function(){if(load_window_time!=-1){load_image_open();}},2000);var chk_url=path+"/detail/"+fc_id+"/"+sm_id;$.ajax({type:"POST",url:chk_url,data:{fc_id:fc_id},dataType:'json',success:function(data){load_window_time=-1;$("#lp_body").fadeIn(100);try
{if(data.message=="error"){view_error_msg(lang_common_contents_is);return;}}
catch(e)
{}
detail_return_data=data.rel_cont_arr;perv_next_data=data.perv_next_data;CONTENTS_IMG_URL=data.CONTENTS_IMG_URL
CONT_TYPE_CODE=data.rs["CONT_TYPE_CODE"];_series_is=false;if(data.rs["FS_ID"]!=null&&data.rs["FS_ID"]!=""){_series_is=true;}else{fc_list=null;}
switch(CONT_TYPE_CODE){case"S":CONT_TYPE_CODE="동화";break;case"M":CONT_TYPE_CODE="동요";break;case"G":CONT_TYPE_CODE="게임";break;}
if(data.message=="error"){view_error_msg("컨텐츠가 없습니다.");return;}
var src_url=data.CONTENTS_IMG_URL+"/"+fc_id+"/detail.png?"+data.rs['PURGE_VAL'];var detail_pop=$('<div></div>').addClass('detail_pop');var title=$('<div></div>').addClass('detail_pop_tit');if(data.rs["CONT_TYPE_CODE"]==="S"){title.append($('<span></span>').addClass('bg_detail_pop detail_pop_tit_level'+data.rs['CONT_LV']).text(eval('lang_contents_level_'+data.rs['CONT_LV'])));title.append($('<div></div>').addClass('detail_pop_tit_txt').append($('<div></div>').addClass('innercontainer').append($('<div></div>').addClass('element').text(data.rs['CONT_TITLE'])))).appendTo(detail_pop);}else{title.append($('<div></div>').addClass('detail_pop_tit_txt type_song_game').append($('<div></div>').addClass('innercontainer').append($('<div></div>').addClass('element').text(data.rs['CONT_TITLE'])))).appendTo(detail_pop);}
if(data.rs["CONT_TYPE_CODE"]!='G')
_free=data.rs['FREE_YN']=="Y"?"F":"";else{_free=data.rs['FREE_YN']==""?"N":data.rs['FREE_YN'];if(data.rs['FREE_YN']=="Y")_free="F";}
total_hit=0;try
{total_hit=data.total_hit[0]['TOT'];}
catch(e)
{}
if(typeof(lang_contents_contents_hit)=="undefined")lang_contents_contents_hit="contents_hit";var detail_pop_cont=$('<div></div>').addClass('detail_pop_cont');if(data.rs["CONT_TYPE_CODE"]!='G')
{if(data.rs["EBOOK_YN"]=="N"){$('<div></div>').addClass('detail_pop_cont_img_box').append($('<a></a>').addClass('detail_pop_cont_img_a').append($('<img></img>').attr({'src':src_url,'alt':data.rs['CONT_TITLE'],'width':"374px",'height':"262px",'class':"bg_wh_border",'style':"cursor:auto;"}))).append($('<div></div>').addClass('bg_detail_pop detail_pop_cont_play btn_170630').attr('style','left:131px').append($('<a></a>').addClass('play_btn_170630 btn_hover').attr('onclick','Player.view("'+fc_id+'" , "'+_free+'")').append($('<span></span>').text("Play")))).appendTo(detail_pop_cont);}else{$('<div></div>').addClass('detail_pop_cont_img_box').append($('<a></a>').addClass('detail_pop_cont_img_a').append($('<img></img>').attr({'src':src_url,'alt':data.rs['CONT_TITLE'],'width':"374px",'height':"262px",'class':"bg_wh_border",'style':"cursor:auto;"}))).append($('<div></div>').addClass('bg_detail_pop detail_pop_cont_play btn_170630').append($('<a></a>').addClass('play_btn_170630 btn_hover').attr('onclick','Player.view("'+fc_id+'" , "'+_free+'")').append($('<span></span>').text("Play"))).append($('<a></a>').addClass('ebook_btn_170630 btn_hover').attr('onclick','Supplement.eBook("'+fc_id+'" , "'+(_free=='F'?'Y':'N')+'")').append($('<span></span>').text("Read")))).appendTo(detail_pop_cont);}}
else
{$('<div></div>').addClass('detail_pop_cont_img_box').append($('<a></a>').addClass('detail_pop_cont_img_a').append($('<img></img>').attr({'src':src_url,'alt':data.rs['CONT_TITLE'],'width':"374px",'height':"262px",'class':"bg_wh_border",}))).append($('<a></a>').addClass('bg_detail_pop detail_pop_cont_play').attr('onclick','Player.view("'+fc_id+'" , "'+_free+'","G")').append($('<span></span>').text("Play"))).appendTo(detail_pop_cont);}
var cont_info_txt=data.rs['CATG_NAME'];if(data.funny['funny_count']=="0")data.funny['funny_count']="";else data.funny['funny_count']=number_format(data.funny['funny_count']);var preference_graph='';if(data.rs["CONT_TYPE_CODE"]!='G'){preference_graph=$('<tr></tr>').append($('<td style="padding-top:5px;"></td>').append($('<ul></ul>').addClass('cont_graph'))).append($('<div></div>').addClass('graph_box').append($('<a></a>').addClass('bg_detail_pop graph_box_close').append('<span>prev</span>').css({'z-index':'1'})).append($('<div></div>').attr('id','graph_box')));}
$('<div></div>').addClass('detail_pop_cont_txt_box').append($('<div></div>').addClass('detail_pop_cont_txt_top').append($('<div></div>').addClass('detail_pop_funny').attr('onclick','run_funny("'+fc_id+'","+")').append($('<a></a>').addClass('detail_pop_funny_bt').append($('<span></span>').addClass('bg_detail_pop detail_pop_funny_img')).append($('<span></span>').addClass('detail_pop_funny_txt').text(lang_contents_funny).append($(' <strong style="margin-left:3px;"></strong>').text(data.funny['funny_count'])))).append($('<div></div>').addClass('detail_pop_cont_txt_funny_layer1').text(lang_contents_this_contents_is_fun).append('<div class="bg_detail_pop detail_pop_cont_txt_funny_layer_arrow"></div>')).append($('<div></div>').addClass('detail_pop_cont_txt_funny_layer2').text(lang_contents_cancel_fun).append('<div class="bg_detail_pop detail_pop_cont_txt_funny_layer2_arrow"></div>')))).append($('<div></div>').addClass('detail_pop_cont_txt_table_box').append($('<table></table>').addClass('detail_pop_cont_txt_table').append($('<tbody></tbody>').append($('<tr></tr>').addClass('tit').append($('<td></td>').text(lang_contents_content_info))).append($('<tr></tr>').append($('<td style="padding-bottom:10px;"></td>').append($('<ul></ul>').addClass('cont_info').append($('<li></li>').text(lang_contents_theme+': '+cont_info_txt)).append($('<li></li>').text(lang_contents_release_date+': '+((data.rs['OPEN_DATE'])?data.rs['OPEN_DATE']:" - "))).append($('<li></li>').text(lang_contents_contents_hit+": "+number_format(total_hit)))))).append($('<tr></tr>').addClass('tit').append($('<td></td>').append($('<span></span>').addClass('txt').text(lang_contents_content_statistics)).append($('<div></div>').addClass('help').append($('<span></span>').addClass('bg_icon icon_detail_mark').append($('<span></span>').text('정보'))).append($('<span></span>').addClass('detail_mark_layer').text('최근 6개월 동안 현재 동화의 전체 학습 횟수를 각 단계 마스터 별 비율로 보여줍니다.').css('z-Index','1').append($('<span></span>').addClass('bg_icon icon_detail_mark_arrow')))))).append(preference_graph)))).appendTo(detail_pop_cont);var div=$('<div></div>').addClass("icon");$(data.supplement_btns2).each(function(key,btn){$(div).append(btn);});_bookshelf_is=false;if(typeof(_web_position)=="undefined"){_bookshelf_is=true;}
if(typeof(_web_position)!="undefined"){if(_web_position!="bookshelf"){_bookshelf_is=true;}}
if(_bookshelf_is==false){$(div).find("span.detail_pop_book").parent().remove();}
$('<div></div>').addClass('detail_pop_cont_study').append($('<div></div>').addClass('detail_pop_cont_study_tit').text(lang_contents_learning_resources)).append(div).appendTo(detail_pop_cont);$(detail_pop).append(detail_pop_cont);if(sm_id||bookshelf_id||fc_move_flag)
{$(detail_pop).append($('<a></a>').addClass('bg_detail_pop detail_pop_prev').append('<span>'+lang_contents_previous_content+'</span>')).append($('<a></a>').addClass('bg_detail_pop detail_pop_next').append('<span>'+lang_contents_next_content+'</span>'))}
$(detail_pop).append($('<a></a>').addClass('detail_pop_close').attr('onclick',"Layerpop.close();").text("×").append('<span>'+lang_contents_close+'</span>'));if(typeof($("#lp_body").html())!="undefined"){$('.detail_pop').remove();$('#lp_film').eq(1).remove();$('#lp_body').html($('<div></div>').append(detail_pop).html());Layerpop.center("lp_body");}else{$('#lp_body .detail_pop').remove();Layerpop.open($('<div></div>').append(detail_pop).html());}
$('.detail_pop_cont_play, .detail_pop_cont_img_box img').attr("data-ga",'상세보기|재생 클릭|'+data.rs['CONT_TITLE']);$('.detail_pop_funny').attr("data-ga",'상세보기|좋아요 클릭|'+data.rs['CONT_TITLE']);if(location.href.indexOf("ezwel.")!=-1){setTimeout(function(){document.domain="ezwel.littlefox.co.kr";},1000);if(ROOT_PATH.substr(1,2)=="ko"){$(".detail_pop_cont_txt_table").find("tr").eq(2).hide();$(".detail_pop_cont_txt_table").find("tr").eq(3).hide();}}
if(data.rs['CONT_TYPE_CODE']=="S"){$(".detail_mark_layer").text(story_detail_mark).css('z-Index','1');}else
if(data.rs['CONT_TYPE_CODE']=="M"){$(".detail_mark_layer").text(song_detail_mark).css('z-Index','1');}else{$(".detail_mark_layer").text("");$(".detail_pop_cont_txt_table").find("tr").eq(2).remove();$(".cont_info").find("li").eq(2).remove();}
$(".cont_info").find("li").eq(0).addClass("subject");var url=location.href;if(url.indexOf('null')>0)
{url=url.replace('null',fc_id);}
else
{url+="/"+fc_id;}
if(url.indexOf('DP0')>0){}else{}
if(data.funny['funny_count']=="0")$(".detail_pop_funny_txt").find("strong").hide();if(!Login.chk()){$('.detail_pop_funny_r').removeClass('detail_pop_funny_r').addClass('detail_pop_funny').attr('onclick','alert("'+lang_contents_quiz_data_logout+'");');$('.detail_pop_funny').removeClass('detail_pop_funny_r').attr('onclick','alert("'+lang_contents_quiz_data_logout+'");');$(".detail_pop_cont_txt_funny_layer1").remove();$(".detail_pop_cont_txt_funny_layer2").remove();}
var _options={width:'339',height:'70',fontSize:"11",fontColor:"red",chartArea:{'left':'0','top':'0','width':'100%','height':'55%'},bar:{groupWidth:'74%'},hAxis:{baselineColor:"#dddddd",textPosition:"none",format:'#%',textStyle:{color:'#444444',fontSize:13}},vAxis:{baselineColor:"#dddddd",textPosition:"none",format:'#%'},series:[{color:"#44e49b"},{color:"#76c5fa"},{color:"#feb240"},{color:"#f6989d"},{color:"#b298f6"}],legend:{position:"bottom"},isStacked:true};$("ul.cont_graph").append($('<li></li>').append('<div id="graph_mini"></div>'));if(typeof(lang_contents_age_data1)=="undefined")lang_contents_age_data1="0-7세";if(typeof(lang_contents_age_data2)=="undefined")lang_contents_age_data2="8-10세";if(typeof(lang_contents_age_data3)=="undefined")lang_contents_age_data3="11-13세";if(typeof(lang_contents_age_data4)=="undefined")lang_contents_age_data4="14-16세";if(typeof(lang_contents_age_data5)=="undefined")lang_contents_age_data5="17-19세";try{var grade_mini_data=new google.visualization.DataTable();grade_mini_data.addColumn('string','AGE');grade_mini_data.addColumn('number',lang_contents_age_data1);grade_mini_data.addColumn({type:'string',role:'tooltip'});grade_mini_data.addColumn('number',lang_contents_age_data2);grade_mini_data.addColumn({type:'string',role:'tooltip'});grade_mini_data.addColumn('number',lang_contents_age_data3);grade_mini_data.addColumn({type:'string',role:'tooltip'});grade_mini_data.addColumn('number',lang_contents_age_data4);grade_mini_data.addColumn({type:'string',role:'tooltip'});grade_mini_data.addColumn('number',lang_contents_age_data5);grade_mini_data.addColumn({type:'string',role:'tooltip'});grade_mini_data.addRows([['',parseInt(data.view_hit['GRADE1']),lang_contents_age_data1+" "+(data.view_hit['GRADE1'])+"%",parseInt(data.view_hit['GRADE2']),lang_contents_age_data2+" "+(data.view_hit['GRADE2'])+"%",parseInt(data.view_hit['GRADE3']),lang_contents_age_data3+" "+(data.view_hit['GRADE3'])+"%",parseInt(data.view_hit['GRADE4']),lang_contents_age_data4+" "+(data.view_hit['GRADE4'])+"%",parseInt(data.view_hit['GRADE5']),lang_contents_age_data5+" "+(data.view_hit['GRADE5'])+"%"]]);var grade_mini_chart=new google.visualization.BarChart(document.getElementById('graph_mini'));grade_mini_chart.draw(grade_mini_data,_options);}
catch(e){}
$('.detail_pop_cont_reco ul li:last').addClass('last');$('#lp_film').click(function(){Layerpop.close();});if(fc_list==null)
{var chk_url="";if(sm_id=="indata"){fc_list=indata;set_prev_next(path,fc_id,sm_id,bookshelf_id);}else if(sm_id)
{back_sm_id=sm_id;chk_url=path+"/get_detail_prev_next_info/"+sm_id+"/"+fc_id+"/"+$(".btn_contents_sort").attr('data-ordertype');}
else if(bookshelf_id)
{back_sm_id=bookshelf_id;chk_url=ROOT_PATH+"/bookshelf/get_shelf_items_all_fc_id/"+bookshelf_id;}
if(sm_id!="indata"){if(chk_url!=""){$.ajax({type:"POST",url:chk_url,dataType:'json',success:function(data){fc_list=data;set_prev_next(path,fc_id,sm_id,bookshelf_id);}});}else{var releated_ul=$('<ul></ul>');$(releated_ul).append(get_releated_obj(detail_return_data,lang_contents_littlefox_readers,CONTENTS_IMG_URL));$('<div></div>').addClass('detail_pop_cont_reco').append($('<div></div>').addClass('detail_pop_cont_reco_tit').text(lang_contents_this_also_got_fun)).append(releated_ul).appendTo($(".detail_pop_cont_study").parent());}}}
else
{set_prev_next(path,fc_id,sm_id,bookshelf_id);}
if(parseInt(data.funny['is_funny_count'])>0&&Login.chk())
{$('.detail_pop_funny').removeClass('detail_pop_funny').addClass('detail_pop_funny_r').attr('onclick','run_funny("'+fc_id+'", "-")');}
$('.detail_pop_bt_box2').click(function(){var layer_pop=$(this).parent().find('.detail_pop_bt_box2_pop');$(layer_pop).css({'display':'block','z-index':'99999'});$(this).removeClass('detail_pop_bt_box2').addClass('detail_pop_bt_box2_r');var left=($(document).width()-$('#lp_body').width())/2;var top=($(document).height()-$('#lp_body').height())/2;$('#lp_body').append($('<div></div>').css({'width':$(document).width(),'height':$(document).height(),'position':'absolute','top':-top,'left':-left,'z-index':'99998'}).attr('id','more_body'));var this_more=$(this);$('#more_body').click(function(){$(this).remove();$(layer_pop).css('display','none');$(this_more).removeClass('detail_pop_bt_box2_r').addClass('detail_pop_bt_box2');});});},error:function(){}});}
function get_releated_obj(data,title,contents_img_url)
{var pgDate=new Date();var pgYear=pgDate.getFullYear().toString();var pgMonth=(pgDate.getMonth()+1).toString();var pgDay=pgDate.getDate().toString();var pgHour=pgDate.getHours().toString();var pergeDate=pgYear+pgMonth+pgDay+pgHour;var obj=$("<div></div>");releated_count=0;$(data).each(function(key,outdata){var image_name="";if(outdata['CONT_TYPE']!='G')
{image_name="notext_ipad.jpg";}
else
{image_name="notext.png";image_name="notext_ipad.jpg";}
var CONT_TYPE=outdata['CONT_TYPE'];switch(outdata['CONT_TYPE']){case"S":outdata['CONT_TYPE']="동화";class_type="readers";break;case"M":outdata['CONT_TYPE']="동요";class_type="songs";break;case"G":outdata['CONT_TYPE']="게임";class_type="games";break;}
last_is="";if(key==4)last_is=" class=\"last\"";$('<li'+last_is+'></li>').append($('<a title="'+outdata['CONT_NAME']+'"></a>').attr('style','cursor:auto;').append($('<div></div>').addClass('list_img_cont_tit').append($('<div ></div>').addClass('subj').append($('<div ></div>').addClass('innercontainer').append($('<div ></div>').addClass('element').text(outdata['CONT_NAME'])))).append($('<div ></div>').addClass('back'))).append($('<span></span>').addClass('bg_detail_pop detail_pop_cont_reco_icon').append($('<span></span>').addClass('bg_icon bs_icon_'+class_type).text(''))).append('<img src="'+contents_img_url+'/'+outdata['FC_ID']+'/'+image_name+'?'+outdata['PURGE_VAL']+'" class="detail_pop_sub_img">').append('<span class="bg_play list_txt_cont_play" onclick="Player.view(\''+outdata['FC_ID']+'\', \''+outdata['FREE']+'\', \''+CONT_TYPE+'\')"></span>')).appendTo(obj);releated_count=releated_count+1;});if(_series_is==true){var image_name="notext_ipad.jpg";_next_no=0;_prev_2=perv_next_data[0];_prev_1=perv_next_data[1];_next_1=perv_next_data[2];_next_2=perv_next_data[3];_next_3=perv_next_data[4];if(releated_count==1&&_series_fc_id==_next_2.fc_id&&_series_fc_id!=perv_next_data[4].fc_id){_next_2=perv_next_data[4];}
switch(releated_count){case 0:if(_prev_2.fc_id!=null){$('<li></li>').append($('<a title="'+_prev_2.cont_name+'"></a>').attr('onclick','Player.view("'+_prev_2.fc_id+'", "'+_prev_2.service+'")').append($('<div></div>').addClass('list_img_cont_tit').append($('<div></div>').addClass('subj').append($('<div ></div>').addClass('innercontainer').append($('<div ></div>').addClass('element').text(_prev_2.cont_name)))).append($('<div ></div>').addClass('back'))).append($('<span></span>').addClass('bg_detail_pop detail_pop_cont_reco_icon').append($('<span></span>').addClass('bg_icon bs_icon_readers').text(''))).append('<img src="'+contents_img_url+'/'+_prev_2.fc_id+'/'+image_name+'?v='+pergeDate+'" class="detail_pop_sub_img">').append('<span class="bg_play list_txt_cont_play"></span>')).appendTo(obj);}
if(_prev_1.fc_id!=null){$('<li></li>').append($('<a title="'+_prev_1.cont_name+'"></a>').attr('onclick','Player.view("'+_prev_1.fc_id+'", "'+_prev_1.service+'")').append($('<div></div>').addClass('list_img_cont_tit').append($('<div></div>').addClass('subj').append($('<div ></div>').addClass('innercontainer').append($('<div ></div>').addClass('element').text(_prev_1.cont_name)))).append($('<div ></div>').addClass('back'))).append($('<span></span>').addClass('bg_detail_pop detail_pop_cont_reco_icon').append($('<span></span>').addClass('bg_icon bs_icon_readers').text(''))).append('<img src="'+contents_img_url+'/'+_prev_1.fc_id+'/'+image_name+'?v='+pergeDate+'" class="detail_pop_sub_img">').append('<span class="bg_play list_txt_cont_play"></span>')).appendTo(obj);}
if(_next_1.fc_id!=null){$('<li></li>').append($('<a title="'+_next_1.cont_name+'"></a>').attr('onclick','Player.view("'+_next_1.fc_id+'", "'+_next_1.service+'")').append($('<div></div>').addClass('list_img_cont_tit').append($('<div></div>').addClass('subj').append($('<div ></div>').addClass('innercontainer').append($('<div ></div>').addClass('element').text(_next_1.cont_name)))).append($('<div ></div>').addClass('back'))).append($('<span></span>').addClass('bg_detail_pop detail_pop_cont_reco_icon').append($('<span></span>').addClass('bg_icon bs_icon_readers').text(''))).append('<img src="'+contents_img_url+'/'+_next_1.fc_id+'/'+image_name+'?v='+pergeDate+'" class="detail_pop_sub_img">').append('<span class="bg_play list_txt_cont_play"></span>')).appendTo(obj);}
if(_next_2.fc_id!=null){$('<li></li>').append($('<a title="'+_next_2.cont_name+'"></a>').attr('onclick','Player.view("'+_next_2.fc_id+'", "'+_next_2.service+'")').append($('<div></div>').addClass('list_img_cont_tit').append($('<div></div>').addClass('subj').append($('<div ></div>').addClass('innercontainer').append($('<div ></div>').addClass('element').text(_next_2.cont_name)))).append($('<div ></div>').addClass('back'))).append($('<span></span>').addClass('bg_detail_pop detail_pop_cont_reco_icon').append($('<span></span>').addClass('bg_icon bs_icon_readers').text(''))).append('<img src="'+contents_img_url+'/'+_next_2.fc_id+'/'+image_name+'?v='+pergeDate+'" class="detail_pop_sub_img">').append('<span class="bg_play list_txt_cont_play"></span>')).appendTo(obj);}
if(_next_3.fc_id!=null){$('<li class="last"></li>').append($('<a title="'+_next_3.cont_name+'"></a>').attr('onclick','Player.view("'+_next_3.fc_id+'", "'+_next_3.service+'")').append($('<div></div>').addClass('list_img_cont_tit').append($('<div></div>').addClass('subj').append($('<div ></div>').addClass('innercontainer').append($('<div ></div>').addClass('element').text(_next_3.cont_name)))).append($('<div ></div>').addClass('back'))).append($('<span></span>').addClass('bg_detail_pop detail_pop_cont_reco_icon').append($('<span></span>').addClass('bg_icon bs_icon_readers').text(''))).append('<img src="'+contents_img_url+'/'+_next_3.fc_id+'/'+image_name+'?v='+pergeDate+'" class="detail_pop_sub_img">').append('<span class="bg_play list_txt_cont_play"></span>')).appendTo(obj);}
break;case 1:if(_prev_2.fc_id!=null){$('<li></li>').append($('<a title="'+_prev_2.cont_name+'"></a>').attr('onclick','Player.view("'+_prev_2.fc_id+'", "'+_prev_2.service+'")').append($('<div></div>').addClass('list_img_cont_tit').append($('<div></div>').addClass('subj').append($('<div ></div>').addClass('innercontainer').append($('<div ></div>').addClass('element').text(_prev_2.cont_name)))).append($('<div ></div>').addClass('back'))).append($('<span></span>').addClass('bg_detail_pop detail_pop_cont_reco_icon').append($('<span></span>').addClass('bg_icon bs_icon_readers').text(''))).append('<img src="'+contents_img_url+'/'+_prev_2.fc_id+'/'+image_name+'?v='+pergeDate+'" class="detail_pop_sub_img">').append('<span class="bg_play list_txt_cont_play"></span>')).appendTo(obj);}
if(_prev_1.fc_id!=null){$('<li></li>').append($('<a title="'+_prev_1.cont_name+'"></a>').attr('onclick','Player.view("'+_prev_1.fc_id+'", "'+_prev_1.service+'")').append($('<div></div>').addClass('list_img_cont_tit').append($('<div></div>').addClass('subj').append($('<div ></div>').addClass('innercontainer').append($('<div ></div>').addClass('element').text(_prev_1.cont_name)))).append($('<div ></div>').addClass('back'))).append($('<span></span>').addClass('bg_detail_pop detail_pop_cont_reco_icon').append($('<span></span>').addClass('bg_icon bs_icon_readers').text(''))).append('<img src="'+contents_img_url+'/'+_prev_1.fc_id+'/'+image_name+'?v='+pergeDate+'" class="detail_pop_sub_img">').append('<span class="bg_play list_txt_cont_play"></span>')).appendTo(obj);}
if(_next_1.fc_id!=null){$('<li></li>').append($('<a title="'+_next_1.cont_name+'"></a>').attr('onclick','Player.view("'+_next_1.fc_id+'", "'+_next_1.service+'")').append($('<div></div>').addClass('list_img_cont_tit').append($('<div></div>').addClass('subj').append($('<div ></div>').addClass('innercontainer').append($('<div ></div>').addClass('element').text(_next_1.cont_name)))).append($('<div ></div>').addClass('back'))).append($('<span></span>').addClass('bg_detail_pop detail_pop_cont_reco_icon').append($('<span></span>').addClass('bg_icon bs_icon_readers').text(''))).append('<img src="'+contents_img_url+'/'+_next_1.fc_id+'/'+image_name+'?v='+pergeDate+'" class="detail_pop_sub_img">').append('<span class="bg_play list_txt_cont_play"></span>')).appendTo(obj);}
if(_next_2.fc_id!=null){$('<li class="last"></li>').append($('<a title="'+_next_2.cont_name+'"></a>').attr('onclick','Player.view("'+_next_2.fc_id+'", "'+_next_2.service+'")').append($('<div></div>').addClass('list_img_cont_tit').append($('<div></div>').addClass('subj').append($('<div ></div>').addClass('innercontainer').append($('<div ></div>').addClass('element').text(_next_2.cont_name)))).append($('<div ></div>').addClass('back'))).append($('<span></span>').addClass('bg_detail_pop detail_pop_cont_reco_icon').append($('<span></span>').addClass('bg_icon bs_icon_readers').text(''))).append('<img src="'+contents_img_url+'/'+_next_2.fc_id+'/'+image_name+'?v='+pergeDate+'" class="detail_pop_sub_img">').append('<span class="bg_play list_txt_cont_play"></span>')).appendTo(obj);}
break;case 2:if(_prev_1.fc_id!=null){$('<li></li>').append($('<a title="'+_prev_1.cont_name+'"></a>').attr('onclick','Player.view("'+_prev_1.fc_id+'", "'+_prev_1.service+'")').append($('<div></div>').addClass('list_img_cont_tit').append($('<div></div>').addClass('subj').append($('<div ></div>').addClass('innercontainer').append($('<div ></div>').addClass('element').text(_prev_1.cont_name)))).append($('<div ></div>').addClass('back'))).append($('<span></span>').addClass('bg_detail_pop detail_pop_cont_reco_icon').append($('<span></span>').addClass('bg_icon bs_icon_readers').text(''))).append('<img src="'+contents_img_url+'/'+_prev_1.fc_id+'/'+image_name+'?v='+pergeDate+'" class="detail_pop_sub_img">').append('<span class="bg_play list_txt_cont_play"></span>')).appendTo(obj);}
if(_next_1.fc_id!=null){$('<li></li>').append($('<a title="'+_next_1.cont_name+'"></a>').attr('onclick','Player.view("'+_next_1.fc_id+'", "'+_next_1.service+'")').append($('<div></div>').addClass('list_img_cont_tit').append($('<div></div>').addClass('subj').append($('<div ></div>').addClass('innercontainer').append($('<div ></div>').addClass('element').text(_next_1.cont_name)))).append($('<div ></div>').addClass('back'))).append($('<span></span>').addClass('bg_detail_pop detail_pop_cont_reco_icon').append($('<span></span>').addClass('bg_icon bs_icon_readers').text(''))).append('<img src="'+contents_img_url+'/'+_next_1.fc_id+'/'+image_name+'?v='+pergeDate+'" class="detail_pop_sub_img">').append('<span class="bg_play list_txt_cont_play"></span>')).appendTo(obj);}
if(_next_2.fc_id!=null){$('<li class="last"></li>').append($('<a title="'+_next_2.cont_name+'"></a>').attr('onclick','Player.view("'+_next_2.fc_id+'", "'+_next_2.service+'")').append($('<div></div>').addClass('list_img_cont_tit').append($('<div></div>').addClass('subj').append($('<div ></div>').addClass('innercontainer').append($('<div ></div>').addClass('element').text(_next_2.cont_name)))).append($('<div ></div>').addClass('back'))).append($('<span></span>').addClass('bg_detail_pop detail_pop_cont_reco_icon').append($('<span></span>').addClass('bg_icon bs_icon_readers').text(''))).append('<img src="'+contents_img_url+'/'+_next_2.fc_id+'/'+image_name+'?v='+pergeDate+'" class="detail_pop_sub_img">').append('<span class="bg_play list_txt_cont_play"></span>')).appendTo(obj);}
break;case 3:if(_prev_1.fc_id!=null){$('<li></li>').append($('<a title="'+_prev_1.cont_name+'"></a>').attr('onclick','Player.view("'+_prev_1.fc_id+'", "'+_prev_1.service+'")').append($('<div></div>').addClass('list_img_cont_tit').append($('<div></div>').addClass('subj').append($('<div ></div>').addClass('innercontainer').append($('<div ></div>').addClass('element').text(_prev_1.cont_name)))).append($('<div ></div>').addClass('back'))).append($('<span></span>').addClass('bg_detail_pop detail_pop_cont_reco_icon').append($('<span></span>').addClass('bg_icon bs_icon_readers').text(''))).append('<img src="'+contents_img_url+'/'+_prev_1.fc_id+'/'+image_name+'?v='+pergeDate+'" class="detail_pop_sub_img">').append('<span class="bg_play list_txt_cont_play"></span>')).appendTo(obj);}
if(_next_1.fc_id!=null){$('<li class="last"></li>').append($('<a title="'+_next_1.cont_name+'"></a>').attr('onclick','Player.view("'+_next_1.fc_id+'", "'+_next_1.service+'")').append($('<div></div>').addClass('list_img_cont_tit').append($('<div></div>').addClass('subj').append($('<div ></div>').addClass('innercontainer').append($('<div ></div>').addClass('element').text(_next_1.cont_name)))).append($('<div ></div>').addClass('back'))).append($('<span></span>').addClass('bg_detail_pop detail_pop_cont_reco_icon').append($('<span></span>').addClass('bg_icon bs_icon_readers').text(''))).append('<img src="'+contents_img_url+'/'+_next_1.fc_id+'/'+image_name+'?v='+pergeDate+'" class="detail_pop_sub_img">').append('<span class="bg_play list_txt_cont_play"></span>')).appendTo(obj);}
break;case 4:break;case 5:break;}}
return $(obj).html();}
var prev_fc_id2="";var prev_fc_id="";var next_fc_id="";var next_fc_id2="";var next_fc_id3="";function set_prev_next(path,fc_id,sm_id,bookshelf_id)
{prev_fc_id2="";prev_fc_id="";next_fc_id="";next_fc_id2="";next_fc_id3="";if($(fc_list).length>1)
{$(fc_list).each(function(key,value){if(value==fc_id)
{if(key==0)
{prev_fc_id2=fc_list[fc_list.length-2];prev_fc_id=fc_list[fc_list.length-1];}
else
{prev_fc_id=fc_list[key-1];if(key-1==0){prev_fc_id2=fc_list[fc_list.length-1];}else{prev_fc_id2=fc_list[key-2];}}
if(key==(fc_list.length-1))
{next_fc_id=fc_list[0];next_fc_id2=fc_list[1];next_fc_id3=fc_list[2];}
else
{next_fc_id=fc_list[key+1];if(key+1==(fc_list.length-1))
{next_fc_id2=fc_list[0];next_fc_id3=fc_list[1];}else{next_fc_id2=fc_list[key+2];if(key+2==(fc_list.length-1))
{next_fc_id3=fc_list[0];}else{next_fc_id3=fc_list[key+3];}}}
if(fc_move_flag){$('.detail_pop_prev').attr('onclick','detail_view("'+path+'", "'+prev_fc_id+'")');$('.detail_pop_next').attr('onclick','detail_view("'+path+'", "'+next_fc_id+'")');}else{$('.detail_pop_prev').attr('onclick','detail_view("'+path+'", "'+prev_fc_id+'", "'+sm_id+'", "'+bookshelf_id+'")');$('.detail_pop_next').attr('onclick','detail_view("'+path+'", "'+next_fc_id+'", "'+sm_id+'", "'+bookshelf_id+'")');}}});}
else
{$('.detail_pop_prev, .detail_pop_next').css('display','none');}
var releated_ul=$('<ul></ul>');var relate_content_html=get_releated_obj(detail_return_data,lang_contents_littlefox_readers,CONTENTS_IMG_URL);$(releated_ul).append(relate_content_html);$('<div></div>').addClass('detail_pop_cont_reco').append($('<div></div>').addClass('detail_pop_cont_reco_tit').text(lang_contents_this_also_got_fun)).append(releated_ul).appendTo($(".detail_pop_prev").prev());if(relate_content_html==''){$('.detail_pop_cont_reco').hide();$('.detail_pop').css("height",450);$('.detail_pop_cont').css("height",355);}}
function drawChart(option,data,view_title,head_array){var table_data=new Array;if(view_title=='graph_box')
{table_data.push(head_array);$.each(data.boy,function(key,value){table_data.push([value.month,parseInt(data.boy[key]['hit']),parseInt(data.girl[key]['hit']),parseInt(data.total[key]['hit'])]);});}
else if(view_title=='graph_box2')
{table_data.push(head_array);$.each(data.boy,function(key,value){table_data.push([value.month,parseInt(data.boy[key]['hit'])]);});}
else
{table_data.push(['Year','']);$.each(data,function(key,value){table_data.push([value.month,parseInt(value.hit)]);});}
var data=google.visualization.arrayToDataTable(table_data);var view_color;switch(view_title)
{case"graph_box":case"graph_box2":case"Movie_graph":view_color="#3d6bcc";break;case"PagebyPage_graph":view_color="#d4280e";break;case"Quiz_graph":view_color="#777777";break;default:view_color="#3d6bcc";break;}
var options={title:'Monthly Graph',width:option['width'],height:option['height'],chartArea:option['chartArea'],vAxis:{textPosition:option['textPosition'],maxValue:option['_max_value']},hAxis:{textPosition:option['textPosition']},curveType:"function",enableInteractivity:true,focusTarget:"datum",legend:{position:option['legend']},series:[{color:view_color,visibleInLegend:true},{color:'#d4280e',visibleInLegend:true},{color:'#777777',visibleInLegend:true}],lineWidth:option['lineWidth'],pointSize:option['pointSize'],tooltip:{textStyle:{color:'black',fontSize:option['tooltip_font']},showColorCode:true,trigger:option['tooltip_trigger']}};if(view_title=='graph_box2')view_title="graph_box";var chart=new google.visualization.LineChart(document.getElementById(view_title));chart.draw(data,options);}
function run_facebook(fc_id)
{var url=location.href;if(url.indexOf('null')>0){url=url.replace('null',fc_id);}else{url+="/"+fc_id;}
window.open('https://www.facebook.com/sharer/sharer.php?u='+encodeURIComponent(url),'facebook','width=900,height=600,scrollbars=1');}
function run_funny(fc_id,division)
{if(Login.chk()===true)
{var chk_url=this.ROOT_PATH+"/readers/plus_funny_count";$.ajax({type:"POST",url:chk_url,data:{fc_id:fc_id,division:division},dataType:'json',success:function(data){if(data.funny_count=="0"){$('span.detail_pop_funny_txt').text(lang_contents_funny);}else{$('span.detail_pop_funny_txt').text(lang_contents_funny+' '+number_format(data.funny_count));}
$('span.detail_pop_funny_txt').show();if(division=="+")
{$('.detail_pop_funny').removeClass('detail_pop_funny').addClass('detail_pop_funny_r').attr('onclick','run_funny("'+fc_id+'", "-")');}
else
{$('.detail_pop_funny_r').removeClass('detail_pop_funny_r').addClass('detail_pop_funny').attr('onclick','run_funny("'+fc_id+'", "+")');}}});}}
function post_to_url(path,params,method,enctype){method=method||"post";var $form=$('#postForm');$form.attr("enctype",enctype);$form.attr("method",method);$form.attr("action",path);$form.attr("target","_self");$form.empty();for(var key in params){var hiddenField=document.createElement("input");hiddenField.setAttribute("type","hidden");hiddenField.setAttribute("name",key);hiddenField.setAttribute("value",params[key]);$form.append(hiddenField);}
$form.submit();}
var Supplement={width:826,height:715,popup:function(url,free,resize)
{if(free!='Y')
{if(Login.need()===false){return;}}
var popup=_popup(url,'supplement',this.width,this.height,'','','',resize);},tr:function(fc_id,free)
{more_menu_hidden();var url=ROOT_PATH+'/supplement/tr/'+fc_id;this.popup(url,free,'');},org:function(fc_id,free)
{more_menu_hidden();this.width=826;this.height=745;if(free!='Y')
{if(Login.need()===false){return;}}
if(cross_pop_yn&&!cross_pop_yn.closed){var title=lang_common_littlefox;var body=lang_contents_org_cross_error;var btns=[{"name":lang_common_confirm,"class":"bt_gra_blue","onclick":"layerClose()","href":"javascript:layerClose()"}];Layerpop.layer_module(title,body,btns,'s');return;}
if(star_pop_yn&&!star_pop_yn.closed){var title=lang_common_littlefox;var body=lang_contents_org_star_error;var btns=[{"name":lang_common_confirm,"class":"bt_gra_blue","onclick":"layerClose()","href":"javascript:layerClose()"}];Layerpop.layer_module(title,body,btns,'s');return;}
var url=ROOT_PATH+'/supplement/org/'+fc_id;if(screen.height<this.height){this.height=(screen.height-80);}
if(screen.width<this.width){this.width=(screen.width-80);}
var winprops='width='+this.width+',height='+this.height+',top='+(((screen.height-this.height)-120)/2)+',left='+(((screen.width-this.width)-100)/2)+',toolbar=0,location=0,directories=0,status=0,menubar=0,scrollbars=0,resizable=0,copyhistory=0';org_pop_yn=window.open(url,'supplement',winprops);if(org_pop_yn==null){return;}else{org_pop_yn.focus();}},sentence:{db:function(fc_id,free)
{more_menu_hidden();var url=ROOT_PATH+'/supplement/sentence/'+fc_id;Supplement.popup(url,free);},file:function(fc_id,free)
{more_menu_hidden();var url=ROOT_PATH+'/supplement/sentence_file/'+fc_id;Supplement.popup(url,free);}},mp3:function(fc_id,free)
{more_menu_hidden();if(free!='Y')
{if(Login.need()===false){return;}}
var url=RESOURCE_DOMAIN.replace('https://','//')+ROOT_PATH+'/supplement/mp3/'+fc_id+'?'+shuffleRandom(21);_reIframe(url);},mp3_file:function(file_id,free)
{more_menu_hidden();if(free!='Y')
{if(Login.need()===false){return;}}
var file_data={};$.ajax({type:"GET",url:'/'+LANG+"/supplement/file_info/"+file_id,dataType:'json',async:true,success:function(data){file_data.fs_id=data.FS_ID;file_data.name=data.NAME;var name=encodeURIComponent(file_data.name);post_to_url('https://cdn.littlefox.co.kr/file_down.php?'+shuffleRandom(21),{'type':'1','file_id':file_id,'name':file_data.name,'fs_id':file_data.fs_id});},error:function(e){console.log(e.responseText);}});},pbook_file:function(file_id,free)
{if(free!='Y')
{if(Login.need()===false){return;}}
win=window.open(RESOURCE_DOMAIN+'/'+LANG+'/supplement/pbook_file/'+file_id+'?'+shuffleRandom(21),"pb_print","width=810,height=794,toolbar=0,location=0,directories=0,status=0,menubar=0,scrollbars=no,resizable=1,copyhistory=0");if(win==null)
{view_error_msg(GLOBAL_POPUP_ERROR);}
return;},topic:function(fc_id,free)
{more_menu_hidden();var url=ROOT_PATH+'/supplement/topic/'+fc_id;this.popup(url,free,'');},howtoplay:function(fc_id,free)
{more_menu_hidden();var url=ROOT_PATH+'/supplement/howtoplay/'+fc_id;this.popup(url,free,'');},worksheet:function(fc_id,free)
{more_menu_hidden();var url='/'+LANG+'/supplement/worksheet/'+fc_id;this.popup(url,free,'');},guide:function(fc_id,free)
{more_menu_hidden();var url=ROOT_PATH+'/supplement/guide/'+fc_id;this.popup(url,free,'');},withmom:function(fc_id,free)
{more_menu_hidden();var url=ROOT_PATH+'/supplement/withmom/'+fc_id;this.popup(url,free,'');},flcard:function(fc_id,free)
{more_menu_hidden();var url=RESOURCE_DOMAIN+'/'+LANG+'/supplement/flcard/'+fc_id+'?'+shuffleRandom(21);this.popup(url,free,1);},paint:function(fc_id,free)
{more_menu_hidden();var url=ROOT_PATH+'/supplement/paint/'+fc_id;this.popup(url,free,'');},quest:function(fc_id,free)
{more_menu_hidden();var url=ROOT_PATH+'/supplement/quest/'+fc_id;this.popup(url,free,'');},crossword:function(fc_id,free,active_mode)
{more_menu_hidden();if(typeof(free)=="undefined"){free="N";}
if(Get_Cookie('fxvocab_'+fc_id)==true){alert(lang_contents_crossword_use_can_not_opned);return;}else{if(free!='Y'){if(Login.need()===false){return;}}
if(voca_pop_yn&&!voca_pop_yn.closed){var title=lang_common_littlefox;var body=lang_contents_vocab_cross_error;var btns=[{"name":lang_common_confirm,"class":"bt_gra_blue","onclick":"layerClose()","href":"javascript:layerClose()"}];Layerpop.layer_module(title,body,btns,'s');return;}
if(org_pop_yn&&!org_pop_yn.closed){var title=lang_common_littlefox;var body=lang_contents_org_cross_error;var btns=[{"name":lang_common_confirm,"class":"bt_gra_blue","onclick":"layerClose()","href":"javascript:layerClose()"}];Layerpop.layer_module(title,body,btns,'s');return;}
var thisHeight=1016,thisWidth=1355;if(FxUserDef.popSize()==0){if((screen.height>399&&screen.height<2000)&&(screen.width>399&&screen.width<3000)){if(screen.height<screen.width){popSizeX=screen.height/thisHeight*0.7;}else{popSizeX=screen.width/thisWidth*0.7;}}else{popSizeX=1;}}else{popSizeX=FxUserDef.popSize();}
popSizeW=Math.round(thisWidth*popSizeX);popSizeH=Math.round(thisHeight*popSizeX);var winWidth=document.body.clientWidth;var winHeight=document.body.clientHeight;var winX=window.screenX||window.screenLeft||0;var winY=window.screenY||window.screenTop||0;var winl=winX+(winWidth-popSizeW)/2;var wint=winY+(winHeight-popSizeH)/2;var url=ROOT_PATH+"/crossword_h5/main/"+fc_id;if(Cookie.get('fxcross')!=null){Cookie.del('fxcross');}
cross_pop_yn=window.open(url,'Vocabulary',"width="+popSizeW+",height="+popSizeH+",top="+wint+",left="+winl+",resizable=1,toolbar=0,status=0,menubar=0");if(cross_pop_yn==null){view_error_msg(GLOBAL_POPUP_ERROR);}else{if(cross_pop_yn.focus){cross_pop_yn.focus();}else{try{getSwf(swfId).openWindowFromSwf(url);}catch(e){if(e instanceof RangeError)return'...';throw e;}}}}},eBook:function(fc_id,free,cont_level)
{var browser_msg,msg_size="m";if(LANG=="ko"){browser_msg="인터넷브라우저의 버전이 낮거나, 지원하지 않는 브라우저입니다.<br/> eBook 서비스는 인터넷익스플로러11 및 크롬에 최적화되어 있습니다.";browser_btn_text="해결방법 보기";article_seq='1022816';}else if(LANG=="en"){browser_msg="eBooks are not supported by your current internet browser. Please try again using the latest version of Internet Explorer, Chrome, or Firefox.";browser_btn_text="Details";article_seq='1022818';}else if(LANG=="jp"){browser_msg="お使いのブラウザはサポートされていないためeBookを開けません。<br/>eBookはInternet Explorer 11およびGoogle Chromeに対応しています";browser_btn_text="くわしくみる";article_seq='1022819';}else if(LANG=="cn"){browser_msg="浏览器版本过低，或当前浏览器不支持该功能。 建议使用Internet Explorer11或Chrome浏览器。";browser_btn_text="查看解决方法";article_seq='1022820';}else if(LANG=="hk"){browser_msg="伺服器版本過低，或當前伺服器不支持該功能。 建議使用Internet Explorer11或Chrome伺服器";browser_btn_text="查看解決方法";article_seq='1022822';}else if(LANG=="tw"){browser_msg="伺服器版本過低，或當前伺服器不支持該功能。 建議使用Internet Explorer11或Chrome伺服器";browser_btn_text="查看解決方法";article_seq='1022821';}else{browser_msg="eBooks are not supported by your current internet browser. Please try again using the latest version of Internet Explorer, Chrome, or Firefox.";browser_btn_text="Details";article_seq='1022818';}
var ebook_browser_info=ebook_browser_detect();if(!ebook_browser_detect()){var title=alert_title;var body=browser_msg;var btns=[{"name":browser_btn_text,"class":"bt_gra_blue","onclick":"ebook_browser_detect_move_to_article('"+article_seq+"')","href":"javascript:layerClose()"}];Layerpop.layer_module(title,body,btns,msg_size);return;};more_menu_hidden();if(free!='Y')
{if(Login.need()===false){return;}}
popSizeW=Math.round(screen.width*0.75);popSizeH=Math.round(screen.width*0.5);var wint=(screen.height-popSizeH)/2;var winl=(screen.width-popSizeW)/2;var url_addr;$.ajax({url:ROOT_PATH+'/readers/seed_encrypt/'+fc_id,async:false,success:function(data){url_addr=ROOT_PATH+'/supplement/ebook/'+data;}});if(url_addr)win=window.open(url_addr,"player","width="+popSizeW+",height="+popSizeH+",top="+wint+",left="+winl+",toolbar=0,location=0,directories=0,status=0,menubar=0,scrollbars=auto,resizable=1,copyhistory=0");},};function ebook_browser_detect(){var ebook_agent=navigator.userAgent.toLowerCase(),ebook_app_name=navigator.appName,ebook_browser,browser_check_value=true,return_val;if(ebook_app_name==='Microsoft Internet Explorer'||ebook_agent.indexOf('trident')>-1||ebook_agent.indexOf('edge/')>-1){ebook_browser='ie';if(ebook_app_name==='Microsoft Internet Explorer'){ebook_agent=/msie ([0-9]{1,}[\.0-9]{0,})/.exec(ebook_agent);if(ebook_agent<10){browser_check_value=false;}
ebook_browser+=parseInt(ebook_agent[1]);if(ebook_browser=='ie9'||ebook_browser=='ie8'||ebook_browser=='ie7'){browser_check_value=false;}}else{if(ebook_agent.indexOf('trident')>-1){ebook_browser+=11;}else if(ebook_agent.indexOf('edge/')>-1){ebook_browser='edge';}}}else if(ebook_agent.indexOf('safari')>-1){if(ebook_agent.indexOf('opr')>-1){ebook_browser='opera';}else if(ebook_agent.indexOf('chrome')>-1){ebook_browser='chrome';}else{ebook_browser='safari';browser_check_value=false;}}else if(ebook_agent.indexOf('firefox')>-1){ebook_browser='firefox';}
return browser_check_value;}
function ebook_browser_detect_move_to_article(seq){layerClose();if(LANG=="ko"){window.location.href='https://www.littlefox.co.kr/'+LANG+'/news_forum/bbs_view/'+seq+'/0/1/N/null/null/N/null';}else{window.location.href='https://www.littlefox.com/'+LANG+'/news_forum/bbs_view/'+seq+'/0/1/N/null/null/N/null';}}
function _reIframe(url){var learning=document.getElementById('learning');learning.innerHTML='<iframe src="'+url+'" class="iframe" id="learning_mp3" style="width:0px;height:0px;display:none"></iframe>';if(navigator.userAgent.indexOf("MSIE 6.0")>0){document.frames['learning_mp3'].location.href=url;}}
function shuffleRandom(n){var temp="";for(var i=1;i<=n;i++){if(Math.floor(Math.random()*2)>0){temp+=String.fromCharCode((Math.random()*26)+65);}else{temp+=String.fromCharCode((Math.random()*26)+97);}}
return temp;}
var PbPrint={open:function(fc_id,free)
{if(free!='Y')
{if(Login.need()===false){return;}}
win=window.open(RESOURCE_DOMAIN+"/"+LANG+"/supplement/printable_book/"+fc_id+'?'+shuffleRandom(21),"pb_print","width=810,height=794,toolbar=0,location=0,directories=0,status=0,menubar=0,scrollbars=no,resizable=1,copyhistory=0");if(win==null)
{view_error_msg(GLOBAL_POPUP_ERROR);}
return;}}
function more_menu_hidden(){if(typeof($('#more_body').html())!="undefined"){$('#more_body').remove();$("div.list_txt_more_layer_pop").hide();$(".list_txt_more_r").addClass("list_txt_more").removeClass("list_txt_more_r");}
if(typeof($('.detail_pop_bt_box2_pop').html())!="undefined"){if($('.detail_pop_bt_box2_pop').css("display")!="none"){$('.detail_pop_bt_box2_pop').hide();$(".detail_pop_bt_box2_r").addClass("detail_pop_bt_box2").removeClass("detail_pop_bt_box2_r");}}}
function Crossword(fcid,free)
{if(free==true){free='Y';}
Supplement.crossword(fcid,free);}
function Vocabulary(fcid,free)
{more_menu_hidden();if(Get_Cookie('fxcross_'+fcid)==true){alert(lang_contents_vocabulary_use_cna_not_opened);return;}else{if(free!='F'&&free!='Y'){if(Login.need()===false){return;}}
if(cross_pop_yn&&!cross_pop_yn.closed){var title=lang_common_littlefox;var body=lang_contents_vocab_cross_error;var btns=[{"name":lang_common_confirm,"class":"bt_gra_blue","onclick":"layerClose()","href":"javascript:layerClose()"}];Layerpop.layer_module(title,body,btns,'s');return;}
if(star_pop_yn&&!star_pop_yn.closed){var title=lang_common_littlefox;var body=lang_contents_vocab_star_error;var btns=[{"name":lang_common_confirm,"class":"bt_gra_blue","onclick":"layerClose()","href":"javascript:layerClose()"}];Layerpop.layer_module(title,body,btns,'s');return;}
var thisHeight=920,thisWidth=826;popSizeW=thisWidth;popSizeH=thisHeight;var winl=(screen.width-popSizeW)/2;var wint=(screen.height-popSizeH)/2;var url=ROOT_PATH+"/supplement/vocabulary/"+fcid;var today=new Date();voca_pop_yn=window.open(url,'Vocabulary'+today.getMinutes(),"width="+popSizeW+",height="+popSizeH+",top="+wint+",left="+winl+",toolbar=0,location=0,directories=0,status=0,menubar=0,resizable=1");if(voca_pop_yn==null){view_error_msg(GLOBAL_POPUP_ERROR);}else{if(voca_pop_yn.focus){voca_pop_yn.focus();}else{try{getSwf(swfId).openWindowFromSwf(url);}catch(e){if(e instanceof RangeError)return'...';throw e;}}}}}
function wordMasterVocabulary(masterSeq,stage,free,gameType)
{more_menu_hidden();var masterMergeValue=masterSeq.toString()+stage.toString();if(Get_Cookie('fxcross_'+masterMergeValue)==true){alert(lang_contents_vocabulary_use_cna_not_opened);return;}else{if(free!='F'&&free!='Y'){if(Login.need()===false){return;}}
if(cross_pop_yn&&!cross_pop_yn.closed){var title=lang_common_littlefox;var body=langVocaCrossMultiErrMsg;var btns=[{"name":lang_common_confirm,"class":"bt_gra_blue","onclick":"layerClose()","href":"javascript:layerClose()"}];Layerpop.layer_module(title,body,btns,'s');return;}
if(star_pop_yn&&!star_pop_yn.closed){var title=lang_common_littlefox;var body=langVocaStarMultiErrMsg;var btns=[{"name":lang_common_confirm,"class":"bt_gra_blue","onclick":"layerClose()","href":"javascript:layerClose()"}];Layerpop.layer_module(title,body,btns,'s');return;}
var thisHeight=920,thisWidth=826;popSizeW=thisWidth;popSizeH=thisHeight;var winl=(screen.width-popSizeW)/2;var wint=(screen.height-popSizeH)/2;var url=ROOT_PATH+"/supplement/master_vocabulary/"+masterSeq+'/'+stage;var today=new Date();voca_pop_yn=window.open(url,'Vocabulary'+today.getMinutes(),"width="+popSizeW+",height="+popSizeH+",top="+wint+",left="+winl+",toolbar=0,location=0,directories=0,status=0,menubar=0,resizable=1");voca_game_type=(gameType=='C')?'cross':'star';if(voca_pop_yn==null){view_error_msg(GLOBAL_POPUP_ERROR);}else{if(voca_pop_yn.focus){voca_pop_yn.focus();}else{try{getSwf(swfId).openWindowFromSwf(url);}catch(e){if(e instanceof RangeError)return'...';throw e;}}}}}
function FlashcardsNew(fcId,free){if(free!='F'&&free!='Y'){if(Login.need()===false)return;}
var thisHeight=601,thisWidth=960;var winl=(screen.width-thisWidth)/2;var wint=(screen.height-thisHeight)/2;var popupTitle='flashcardsPopup';var flashcardsPopup=window.open('',popupTitle,'width='+thisWidth+', height='+thisHeight+',top='+wint+',left='+winl+',resizable=1,toolbar=0,status=0,menubar=0, scrollbars=no"');var form=document.createElement("form");form.setAttribute("charset","UTF-8");form.setAttribute("method","Post");form.setAttribute("action",ROOT_PATH+"/flashcards");form.setAttribute("target",popupTitle);var fcIdInput=document.createElement("input");fcIdInput.setAttribute("type","hidden");fcIdInput.setAttribute("name","fc_id");fcIdInput.setAttribute("value",fcId);form.appendChild(fcIdInput);document.body.appendChild(form);form.submit();}
function FlashcardsVoca(vocabularyId,sort){var thisHeight=601,thisWidth=960;var winl=(screen.width-thisWidth)/2;var wint=(screen.height-thisHeight)/2;var popupTitle='flashcardsPopup';var flashcardsPopup=window.open('',popupTitle,'width='+thisWidth+', height='+thisHeight+',top='+wint+',left='+winl+',resizable=1,toolbar=0,status=0,menubar=0, scrollbars=no"');var form=document.createElement("form");form.setAttribute("charset","UTF-8");form.setAttribute("method","Post");form.setAttribute("action",ROOT_PATH+"/flashcards");form.setAttribute("target",popupTitle);var vlIdInput=document.createElement("input");vlIdInput.setAttribute("type","hidden");vlIdInput.setAttribute("name","vocabulary_id");vlIdInput.setAttribute("value",vocabularyId);form.appendChild(vlIdInput);var vlIdInput2=document.createElement("input");vlIdInput2.setAttribute("type","hidden");vlIdInput2.setAttribute("name","sort");vlIdInput2.setAttribute("value",sort);form.appendChild(vlIdInput2);var fcInput=document.getElementsByName('SelVoc[]');var useVocaId=[];fcInput.forEach(function(item,index){if(item.checked){useVocaId.push(item.value);}});var fcid=document.createElement("input");fcid.setAttribute("type","hidden");fcid.setAttribute("name","check_word");fcid.setAttribute("value",useVocaId);form.appendChild(fcid);document.body.appendChild(form);form.submit();}
function wordMasterGamePlay(wordMasterSeq,stage,type,free)
{if(voca_pop_yn&&!voca_pop_yn.closed){var title=lang_common_littlefox;var body=type=='S'?langVocaStarMultiErrMsg:langVocaCrossMultiErrMsg;var btns=[{"name":lang_common_confirm,"class":"bt_gra_blue","onclick":"layerClose()","href":"javascript:layerClose()"}];Layerpop.layer_module(title,body,btns,'s');return;}
var url='';if(type==='C'){var thisHeight=1016,thisWidth=1355;if(FxUserDef.popSize()==0){if((screen.height>399&&screen.height<2000)&&(screen.width>399&&screen.width<3000)){if(screen.height<screen.width){popSizeX=screen.height/thisHeight*0.7;}else{popSizeX=screen.width/thisWidth*0.7;}}else{popSizeX=1;}}else{popSizeX=FxUserDef.popSize();}
popSizeW=Math.round(thisWidth*popSizeX);popSizeH=Math.round(thisHeight*popSizeX);var winWidth=document.body.clientWidth;var winHeight=document.body.clientHeight;var winX=window.screenX||window.screenLeft||0;var winY=window.screenY||window.screenTop||0;var winl=winX+(winWidth-popSizeW)/2;var wint=winY+(winHeight-popSizeH)/2;url='/'+LANG+'/crossword_h5_v2/main/'+wordMasterSeq+"/"+stage+"/"+free;cross_pop_yn=window.open(url,'FoxCrossGame',"width="+popSizeW+",height="+popSizeH+",top="+wint+",left="+winl+",resizable=0,toolbar=0,status=0,menubar=0,location=0,directories=0");}else{var thisHeight=1440,thisWidth=1920;popSizeW=thisWidth*0.5;popSizeH=thisHeight*0.5;var winWidth=document.body.clientWidth;var winHeight=document.body.clientHeight;var winX=window.screenX||window.screenLeft||0;var winY=window.screenY||window.screenTop||0;var winl=winX+(winWidth-popSizeW)/2;var wint=winY+(winHeight-popSizeH)/2;url="/"+LANG+"/starwords_h5_v3/main/"+wordMasterSeq+"/"+stage+"/"+free;star_pop_yn=window.open(url,'FoxStarGame',"width="+popSizeW+",height="+popSizeH+",top="+wint+",left="+winl+",resizable=0,toolbar=0,status=0,menubar=0,location=0,directories=0");}
if(star_pop_yn==null&&cross_pop_yn==null){view_error_msg(GLOBAL_POPUP_ERROR);}else{if(star_pop_yn){if(star_pop_yn.focus){star_pop_yn.focus();}else{try{getSwf(swfId).openWindowFromSwf(url);}catch(e){if(e instanceof RangeError)return'...';throw e;}}}
if(cross_pop_yn){if(cross_pop_yn.focus){cross_pop_yn.focus();}else{try{getSwf(swfId).openWindowFromSwf(url);}catch(e){if(e instanceof RangeError)return'...';throw e;}}}}}
function ViewSW(fcid,free)
{_free_is=false;if(typeof(free_is)!="undefined"){if(free_is=="F")_free_is=true;}
if(_free_is==false){if(typeof(free)=="undefined"){if(Login.need()===false){return;}}
if(free!='Y'){if(Login.chk()===false){Login.needPop();return;}}}
if(voca_pop_yn&&!voca_pop_yn.closed){var title=lang_common_littlefox;var body=lang_contents_vocab_star_error;var btns=[{"name":lang_common_confirm,"class":"bt_gra_blue","onclick":"layerClose()","href":"javascript:layerClose()"}];Layerpop.layer_module(title,body,btns,'s');return;}
if(org_pop_yn&&!org_pop_yn.closed){var title=lang_common_littlefox;var body=lang_contents_org_star_error;var btns=[{"name":lang_common_confirm,"class":"bt_gra_blue","onclick":"layerClose()","href":"javascript:layerClose()"}];Layerpop.layer_module(title,body,btns,'s');return;}
var thisHeight=1440,thisWidth=1920;popSizeW=thisWidth*0.5;popSizeH=thisHeight*0.5;var winWidth=document.body.clientWidth;var winHeight=document.body.clientHeight;var winX=window.screenX||window.screenLeft||0;var winY=window.screenY||window.screenTop||0;var winl=winX+(winWidth-popSizeW)/2;var wint=winY+(winHeight-popSizeH)/2;var url="/ko/starwords_h5_v2/main/"+fcid;star_pop_yn=window.open(url,'FoxStarGame',"width="+popSizeW+",height="+popSizeH+",top="+wint+",left="+winl+",resizable=0,toolbar=0,status=0,menubar=0,location=0,directories=0");if(star_pop_yn==null){view_error_msg(GLOBAL_POPUP_ERROR);}else{if(star_pop_yn.focus){star_pop_yn.focus();}else{try{getSwf(swfId).openWindowFromSwf(url);}catch(e){if(e instanceof RangeError)return'...';throw e;}}}}
function ViewQuiz(fcid,free)
{_free_is=false;if(free==true){_free_is=true;}
if(typeof(free_is)!="undefined")
{if(free_is=="F")_free_is=true;}
if(_free_is==false){if(typeof(free)=="undefined"){if(Login.need()===false){return;}}
if(free!='Y')
{if(Login.chk()===false){Login.needPop();return;}}}
var thisHeight=720,thisWidth=1035;var winl=(screen.width-thisWidth)/2;var wint=(screen.height-thisHeight)/2;var url=ROOT_PATH+"/quiz/play/"+fcid;var win=window.open(url,'FoxQuiz',"width="+thisWidth+",height="+thisHeight+",top="+wint+",left="+winl+",resizable=1,toolbar=0,status=0,menubar=0");if(win==null)
{view_error_msg(GLOBAL_POPUP_ERROR);}else{if(win.focus)
{win.focus();}
else
{try{getSwf(swfId).openWindowFromSwf(url);}catch(e){if(e instanceof RangeError)return'...';throw e;}}}}
function PrintQuiz(fcid,frid)
{if(Login.need()===false){return;}
var win=window.open(ROOT_PATH+"/quiz/quizprint/"+fcid+"/"+frid,'quizprint',"width=740,height=900,top=50,left=100,scrollbars=yes");if(win.focus)win.focus();}
var tracks_list="";function open_add_to_studyplan(fcid){if(Login.need()===false){return;}
tracks_list="\""+fcid+"\"";Layerpop.layer_module($("#temp_studyplan").find("div.layerpop_m2_tit>span").html(),$("#temp_studyplan").find("div.layerpop_m2_cont").html(),new Array(),'l');$("#lp_body").find(".layerpop_l_cont").parent().css("width","920px");$("#lp_body").css("height","");Layerpop.center('lp_body');$("#lp_body").find("input[name=date_from]").datepicker({showOtherMonths:true,selectOtherMonths:true,changeMonth:true,changeYear:true,dateFormat:"yy-mm-dd",showButtonPanel:false,dayNamesMin:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthNames:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],monthNamesShort:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],onClose:function(dateText){if($("#lp_body").find("input[name=date_to]").val()<dateText){$("#lp_body").find("input[name=date_to]").val(dateText);}
$("#lp_body").find("input[name=date_to]").datepicker("option","minDate",dateText);}});$("#lp_body").find("input[name=date_to]").datepicker({showOtherMonths:true,selectOtherMonths:true,changeMonth:true,changeYear:true,dateFormat:"yy-mm-dd",showButtonPanel:false,dayNamesMin:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthNames:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],monthNamesShort:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],onClose:function(dateText){return;}});$("#lp_body").find("input[name=date_to]").datepicker("option","minDate",$("#lp_body").find("input[name=date_from]").val());var date=new Date();var month=(date.getMonth()+1)<10?"0"+(date.getMonth()+1):(date.getMonth()+1);var day=date.getDate()<10?"0"+date.getDate():date.getDate();var today=date.getFullYear()+'-'+month+'-'+day;var date2=date.getFullYear()+"-"+month+"-"+day;var param_data='{"date":"'+(date.getFullYear()+'-'+month)+'"}';$.post(ROOT_PATH+"/api/studyplan/cal_navi/json",{parm_string:param_data},function(data){if(data){$("tbody[id=calendar]").html(calendar_plan(date2,data));var json_data=json_decode(data);begin_date=$("#lp_body").find("input[name=date_from]").val();_new_data="false";$("#lp_body").find("#calendar").find("td").each(function(){if(strpos($(this).prop("onclick"),substr(begin_date,0,4)+"-"+substr(begin_date,5,2)+"-"+substr(begin_date,8,2))!==false){$(this).click();_new_data="true";return;}});if(_new_data=="false"){getList_plan(today,'','');}}});}
function getList_plan(today,begin_date,end_date){if(begin_date){$("#lp_body").find("input[name=date_from]").attr("disabled",true);$("#lp_body").find("input[name=date_from]").parent().find("a").attr("onclick","");}
else{$("#lp_body").find("input[name=date_from]").attr("disabled",false);$("#lp_body").find("input[name=date_from]").parent().find("a").attr("onclick","DateView.from(this)");}
if(end_date){$("#lp_body").find("input[name=date_to]").attr("disabled",true);$("#lp_body").find("input[name=date_to]").parent().find("a").attr("onclick","");}
else{$("#lp_body").find("input[name=date_to]").attr("disabled",false);$("#lp_body").find("input[name=date_to]").parent().find("a").attr("onclick","DateView.to(this)");}
var _begin_date=begin_date?substr(begin_date,0,4)+"-"+substr(begin_date,4,2)+"-"+substr(begin_date,6,2):today;var _end_date=end_date?substr(end_date,0,4)+"-"+substr(end_date,4,2)+"-"+substr(end_date,6,2):today;$("#lp_body").find("input[name=date_from]").val(_begin_date);$("#lp_body").find("input[name=date_to]").val(_end_date);date_from=_begin_date;date_to=_end_date;begin_date=$("#lp_body").find("input[name=date_from]").val();$("#lp_body").find("#setDate").text(substr(begin_date,0,4)+"년 "+(substr(begin_date,5,2)*1)+"월 "+(substr(begin_date,8,2)*1)+"일");$("#lp_body").find("#calendar").find("td").each(function(){$(this).removeClass("click");});temp_color_class="";$("#lp_body").find("#calendar").find("td").each(function(){if(strpos($(this).prop("onclick"),substr(begin_date,0,4)+"-"+substr(begin_date,5,2)+"-"+substr(begin_date,8,2))!==false){temp_color_class=$(this).prop("class");$(this).addClass("click");}else{if(temp_color_class!=""){if(typeof(temp_color_class)=="undefined"||(typeof(temp_color_class)!="undefined"&&temp_color_class!=$(this).prop("class"))){temp_color_class="";}}}
if(typeof(temp_color_class)!="undefined"&&temp_color_class!=""){$(this).addClass("click");}});var param_data='{"fc_list":['+tracks_list+'], "date":"'+today+'", "order":""}';$.post(ROOT_PATH+"/api/studyplan/getPlanlist",{parm_string:param_data},function(data){var _new_writing="true";try
{if(data!=""){var json_data=json_decode(data);var _list="";for(var cnt=0;cnt<count(json_data);cnt++){var values=json_data[cnt];var type_name="";var class_type="";var begin_date=values['BEGIN_DATE'];var end_date=values['END_DATE'];switch(values['CONT_TYPE']){case"story":type_name="동화";class_type="readers";break;case"song":type_name="동요";class_type="songs";break;}
var level=Number(substr(values['LEVEL_CODE'],2));var level_html='<span> - </span>';var in_class=(begin_date&&end_date)?'':'class="now"';if(values['CONT_TYPE']=="story"){level_html='<span class="level_bt level5">'+level+' 단계</span>';}
_list+='<tr '+in_class+' name="now">'
+'<input type="hidden" name="contents_Fc_id" value="'+values['FC_ID']+'">'
+'<input type="hidden" name="contents_Plan_id" value="'+values['PLAN_ID']+'">'
+'<input type="hidden" name="contents_Cont_name" value="'+values['CONT_NAME']+'">'
+'<td>'+(cnt+1)+'</td>'
+'<td>'
+'<img src="'+IMG_CDN+'/static/contents/img/'+values['FC_ID']+'/notext_ipad.jpg?'+IMG_VERSION+'" class="plan_thumbnail">'
+'</td>'
+'<td>'
+'<span class="bg_icon bs_icon_'+class_type+'" title="'+type_name+'"><span>'+type_name+'</span></span>'
+'</td>'
+'<td class="subject">'
+'<div>'+values['CONT_NAME']+'</div>'
+'</td>'
+'<td>'
+level_html
+'</td>'
+'</tr>';if(values['PLAN_ID']!=""){_new_writing="false";}}
$("tbody[id=studyplan_list]").html(_list);}else{$("tbody[id=studyplan_list]").html("");}}
catch(e)
{$("tbody[id=studyplan_list]").html("");}
if(_new_writing=="false"){$("#lp_body").find("input[name=date_from]").attr("disabled",true);$("#lp_body").find("input[name=date_from]").parent().find("a").attr("onclick","");$("#lp_body").find("input[name=date_to]").attr("disabled",true);$("#lp_body").find("input[name=date_to]").parent().find("a").attr("onclick","");}else{$("#lp_body").find("input[name=date_from]").attr("disabled",false);$("#lp_body").find("input[name=date_from]").parent().find("a").attr("onclick","DateView.from(this)");$("#lp_body").find("input[name=date_to]").attr("disabled",false);$("#lp_body").find("input[name=date_to]").parent().find("a").attr("onclick","DateView.to(this)");}});}
function calendar_plan(_date,_data)
{var cal="";if(_date){var temp_date=str_replace("-","",_date);var _year=substr(temp_date,0,4);var _month=Number(substr(temp_date,4,2))-1;var _day=strlen(temp_date)>6?Number(substr(temp_date,6,2)):1;var date=new Date(_year,_month,_day);}else{var date=new Date();}
var day=date.getDate();var month=date.getMonth();var year=date.getYear();if(year<=200)
{year+=1900;}
months=new Array('1','2','3','4','5','6','7','8','9','10','11','12');days_in_month=new Array(31,28,31,30,31,30,31,31,30,31,30,31);if(year%4==0&&year!=1900)
{days_in_month[1]=29;}
total=days_in_month[month];beg_j=date;beg_j.setDate(1);if(beg_j.getDate()==2)
{beg_j=setDate(0);}
beg_j=beg_j.getDay();cal+="<tr>";week=0;for(i=1;i<=beg_j;i++)
{cal+=('<td>&nbsp;</td>');week++;}
var _json_data=json_decode(_data);for(i=1;i<=total;i++)
{if(week==0)
{cal+=('<tr>');}
var _class="";if(week==0)_class="red";else if(week==6)_class="blue";else _class="week";var plan_id_Span="";var color_class="";var begin_date="";var end_date="";if(_json_data[i]['plan_id']!=""){color_class=_json_data[i]['color'];begin_date=_json_data[i]['begin_date'];end_date=_json_data[i]['end_date'];plan_id_Span='<span class="bg_icon icon_plan_book"><span>학습계획 있음</span></span>';}
var today=date.getFullYear()+"-"+((months[month])<10?"0"+(months[month]):(months[month]))+"-"+(i<10?"0"+i:i);cal+='<td class="'+color_class+'" onclick="getList_plan(\''+today+'\', \''+begin_date+'\', \''+end_date+'\')"><div><span class="'+_class+'">'+i+'</span>'+plan_id_Span+'</div></td>';week++;if(week==7)
{cal+=('</tr>');week=0;}}
for(i=1;week!=0;i++)
{cal+=('<td>&nbsp;</td>');week++;if(week==7)
{cal+=('</tr>');week=0;}}
cal=str_replace("<tr><tr>","<tr>",cal);var re=new RegExp("<tr>","ig");var resultArray=cal.match(re);if(resultArray.length>5){cal=str_replace("<div>","<div style='height:32px'>",cal);}
return cal;}
var date_from='';var date_to='';function studyDate(obj){if($(obj).attr("name")=="date_from"){date_from=$(obj).val();}
else if($(obj).attr("name")=="date_to"){date_to=$(obj).val();}}
function changeMonth(mode){var temp_date=$("#set_date").val();var date="";if(mode==1){date=new Date(substr(temp_date,0,4),(Number(substr(temp_date,5,2))),1);}
else{date=new Date(substr(temp_date,0,4),(Number(substr(temp_date,5,2))-2),1);}
var temp_month=(Number(date.getMonth())+1)<10?"0"+(Number(date.getMonth())+1):(Number(date.getMonth())+1);var date2=date.getFullYear()+'-'+temp_month+'-01';var param_data='{"date":"'+date.getFullYear()+'-'+temp_month+'"}';$.post(ROOT_PATH+"/api/studyplan/cal_navi/json",{parm_string:param_data},function(data){if(data){$("tbody[id=calendar]").html(calendar_plan(date2,data));var json_data=json_decode(data);$("span[name=setDate]").html(date.getFullYear()+"년 "+(Number(date.getMonth())+1)+"월");$("input[name=set_date]").val(date.getFullYear()+"-"+temp_month+"-01");getList_plan(date2);}});}
var seq_plan_id="";function chk_dup_date(){date_from=$("#lp_body").find("input[name=date_from]").val();date_to=$("#lp_body").find("input[name=date_to]").val();var _date_from=str_replace("-","",date_from);var _date_to=str_replace("-","",date_to);if(_date_from>_date_to){alert("학습기간 종료일은 시작일 이후의 날짜를 선택하세요");return;}
var contents_list="";var studyplan_contents=$("#studyplan_list");var studyplan_count=studyplan_contents.find("tr").size();var oncheck=$("#lp_body").find("input[name=date_from]").attr("disabled")=="disabled"?true:false;var g_plan_id="";studyplan_contents.find("tr[name=now]").each(function(idx){var fc_id=$(this).find("input[name=contents_Fc_id]").val();var plan_id=$(this).find("input[name=contents_Plan_id]").val();var cont_name=$(this).find("input[name=contents_Cont_name]").val();if($(this).find("input[name=contents_Plan_id]").val()!=""&&(typeof $(this).find("input[name=contents_Plan_id]").val()!="undefined"))g_plan_id=$(this).find("input[name=contents_Plan_id]").val();contents_list+=idx==0?'{"fc_id":"'+fc_id+'","plan_id":"'+plan_id+'","cont_name":"'+cont_name+'"}':',{"fc_id":"'+fc_id+'","plan_id":"'+plan_id+'","cont_name":"'+cont_name+'"}';});var str='{"mode":"write", "type":"add", "plan_id":"'+g_plan_id+'", "date_from":"'+date_from+'", "date_to":"'+date_to+'", "plan_text":"", "contents_list":['+contents_list+']}';$.post(ROOT_PATH+"/api/studyplan/chk_dup_date",{parm_string:str},function(data){if(data){var json_data=json_decode(data);if(json_data['code']==200){seq_plan_id=json_data['plan_id'];var title="학습계획 등록";var body=json_data['msg'];var btns=[{"name":"확인","class":"bt_gra_blue","onclick":"myStudyplan()","href":"javascript:myStudyplan()"},{"name":"취소","class":"bt_gra_blue","onclick":"layerClose()","href":"javascript:layerClose()"}];Layerpop.layer_module(title,body,btns,'m');}else{alert(json_data['msg']);}}});}
function layerClose(){Layerpop.close();}
function myStudyplan(){var _date_from=str_replace("-","",date_from);location.href=ROOT_PATH+"/api/studyplan/myStudyplanData/"+_date_from+"/"+seq_plan_id;}
function fnRedirectList(smid)
{opener.location.href=ROOT_PATH+"/readers/contents_list/"+smid;self.close();}
function showRecordGuide(){var url=ROOT_PATH+'/forum/article_topic/record';if(window.opener!=null){try{window.opener.location.href=url;window.open('about:blank','_self').close();}catch(e){location.href=url;}}else{location.href=url;}}
function ViewRecord(fcid,free){_free_is=false;if(typeof(free_is)!="undefined")
{if(free_is=="F")_free_is=true;}
if(_free_is==false){if(typeof(free)=="undefined"){if(Login.need()===false){return;}}
if(free!='Y')
{if(Login.chk()===false){Login.needPop();return;}}}
if(/Trident/.test(navigator.userAgent)){var btns=[{"name":"해결 방법 보기","class":"bt_gra_blue","onclick":"showRecordGuide()","href":"javascript:showRecordGuide()"}];var div=$('<div></div>');$('<span></span>').addClass('layerpop_find_id_txt').css("font-weight","normal").append('지원하지 않는 인터넷 브라우저입니다.<br>녹음기 서비스는 크롬에 최적화 되어 있습니다.').appendTo(div);Layerpop.layer_module(POP_TITLE,$(div).html(),btns,'s2');return;}
var popSizeH=640,popSizeW=360;var xPos=((document.body.clientWidth/2)-(popSizeW/2))+window.screenLeft;var yPos=((screen.availHeight/2)-(popSizeH/2))+window.screenTop;var url=ROOT_PATH+"/record/pop/"+fcid;var win=window.open(url,'FoxRecord','width='+popSizeW+',height='+popSizeH+', left='+xPos+', top='+yPos+',resizable=0,toolbar=0,status=0,menubar=0,location=0,directories=0');if(win==null)
{view_error_msg(GLOBAL_POPUP_ERROR);}else{if(win.focus)
{win.focus();}
else
{try{getSwf(swfId).openWindowFromSwf(url);}catch(e){if(e instanceof RangeError)return'...';throw e;}}}}
var pwd_checker={path:'',cont:'',elems:[],b_passed:false,func_to_execute:function(){},setMessage:function(msg){this.cont=''+'<div class="layerpop_s2">\n'+' <div class="layerpop_s2_tit"><span>'+alert_title+'</span></div>\n'+' <div class="layerpop_s2_cont"> \n'+'  <div class="report_box">\n'+'   <div class="top">\n'+'    '+msg+'\n'+'   </div>\n'+'   <div class="middle" style="height:10px">\n'+'   </div>\n'+'   <div class="bottom">\n'+'    <input type="password" id="txt_pwd_check" /><br /> \n'+'   </div>\n'+'  </div>\n'+'  \n'+' </div>\n'+' \n'+' <div class="pop_center">\n'+'  <button type="button" class="bt_gra_blue" onclick="pwd_checker.submit();">확인</button>\n'+'  <button type="button" class="bt_gra_gray" onclick="Layerpop.close();">취소</button>\n'+' </div>\n'+' \n'+' <a href="javascript:Layerpop.close();" class="bt_x_close">×</a>\n'+'</div>\n'+''},check:function(msg,path,func){this.setMessage(msg);this.path=path;this.func_to_execute=func;if(this.b_passed){this.func_to_execute();}else{Layerpop.open(this.cont);$("#lp_body").html(this.cont);Layerpop.insertDiv();Layerpop.center('lp_body');$('#txt_pwd_check').focus();return;}},submit:function(){$.post(this.path+"/user/diff_password_post/",{'password':$("#txt_pwd_check").val()},function(data){if(data==1){Layerpop.close();pwd_checker.b_passed=true;pwd_checker.func_to_execute();}else{pwd_checker.b_passed=false;alert("비밀번호가 맞지 않습니다.");Layerpop.close();}});}};var foxsam_checker={path:'',cont:'',elems:[],myFunc:function(){},setMessage:function(msg)
{var strBtn='';if(this.type=='confirm'){strBtn='  <button type="button" class="bt_gra_blue" onclick="foxsam_checker.submit();">확인</button>\n'+'  <button type="button" class="bt_gra_gray" onclick="Layerpop.close();">취소</button>\n';}else{strBtn='  <button type="button" class="bt_gra_blue" onclick="Layerpop.close();">확인</button>\n';}
this.cont=''+'<div class="layerpop_s2" style="width:400px">\n'+' <div class="layerpop_s2_tit"><span>'+alert_title+'</span></div>\n'+' <div class="layerpop_s2_cont"> \n'+'  <div class="report_box">\n'+'   <div class="top">\n'+'    '+msg+'<br />\n'+'   </div>\n'+'  </div>\n'+'  \n'+' </div>\n'+' \n'+' <div class="pop_center">\n'+strBtn+' </div>\n'+' \n'+' <a href="javascript:Layerpop.close();" class="bt_x_close">×</a>\n'+'</div>\n'+'';},check:function(msg,type,func){this.type=type;this.setMessage(msg);this.myFunc=func;Layerpop.open(this.cont);$("#lp_body").html(this.cont);Layerpop.insertDiv();Layerpop.center('lp_body');$('#txt_pwd_check').focus();},submit:function(){this.myFunc();Layerpop.close();}};